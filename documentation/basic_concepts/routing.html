<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 2014-03-13 
 | Rendered using Apache Maven Fluido Skin 1.3.1
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20140313" />
    <meta http-equiv="Content-Language" content="en" />
    <title>Ninja - full stack web framework for Java - </title>
    <link rel="stylesheet" href="../../css/apache-maven-fluido-1.3.1.min.css" />
    <link rel="stylesheet" href="../../css/site.css" />
    <link rel="stylesheet" href="../../css/print.css" media="print" />

      
    <script type="text/javascript" src="../../js/apache-maven-fluido-1.3.1.min.js"></script>

                          
        
<meta content="Ninja is a full stack web framework for Java.                      Rock solid, fast and super productive." name="description"/>
                      
        
<link rel="icon" type="image/png" href="favicon.png"/>
                      
        
<link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Droid+Sans:400,700|Droid+Serif:400,700,400italic,700italic"/>
                      
        
<script type="text/javascript">var _gaq = _gaq || [];
                _gaq.push(['_setAccount', 'UA-38154034-1']);
                _gaq.push(['_trackPageview']);

                (function() {
                var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
                ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
                var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
                })();</script>
          
                  </head>
        <body class="topBarDisabled">
          
    
    
            
    
        
    <a href="http://github.com/ninjaframework/ninja">
      <img style="position: absolute; top: 0; right: 0; border: 0; z-index: 10000;"
        src="https://s3.amazonaws.com/github/ribbons/forkme_right_gray_6d6d6d.png"
        alt="Fork me on GitHub">
    </a>
  
                
                    
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                                  <a href="../.././" id="bannerLeft" title="Ninja web framework">
                                                                                                <img src="../../ninja_logo.png"  alt="Ninja web framework"/>
                </a>
                      </div>
        <div class="pull-right">  </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
                    
            
                
                    
                  <li id="publishDate" class="pull-right"><span class="divider">|</span> Last Published: 2014-03-13</li>
              <li id="projectVersion" class="pull-right">
                    Version: 3.1.2
        </li>
            
                            </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span3">
          <div class="well sidebar-nav">
                
                    
                <ul class="nav nav-list">
                    <li class="nav-header">Introduction</li>
                              
      <li>
  
                          <a href="../../introduction.html" title="The problem we solve">
          <i class="none"></i>
        The problem we solve</a>
            </li>
                
      <li>
  
                          <a href="../../high_level_overview.html" title="Ninja - high level overview">
          <i class="none"></i>
        Ninja - high level overview</a>
            </li>
                
      <li>
  
                          <a href="../../team.html" title="The team">
          <i class="none"></i>
        The team</a>
            </li>
                              <li class="nav-header">Commercial support</li>
                              
      <li>
  
                          <a href="../../commercial_support/philosophy.html" title="Philosophy">
          <i class="none"></i>
        Philosophy</a>
            </li>
                
      <li>
  
                          <a href="../../commercial_support/training.html" title="Training">
          <i class="none"></i>
        Training</a>
            </li>
                
      <li>
  
                          <a href="../../commercial_support/support_plans.html" title="Support plans">
          <i class="none"></i>
        Support plans</a>
            </li>
                
      <li>
  
                          <a href="../../commercial_support/agile_custom_development.html" title="Custom development">
          <i class="none"></i>
        Custom development</a>
            </li>
                              <li class="nav-header">Documentation</li>
                                                                                                                    
      <li>
  
                          <a href="../../documentation/getting_started/installing_ninja.html" title="Getting Started">
          <i class="icon-chevron-right"></i>
        Getting Started</a>
                  </li>
                                                                                                                                                                                                          
      <li>
  
                          <a href="../../documentation/basic_concepts/basic_concepts.html" title="Basic concepts">
          <i class="icon-chevron-down"></i>
        Basic concepts</a>
                    <ul class="nav nav-list">
                    
      <li>
  
                          <a href="../../documentation/basic_concepts/super_dev_mode.html" title="SuperDevMode">
          <i class="none"></i>
        SuperDevMode</a>
            </li>
                    
      <li class="active">
  
            <a href="#"><i class="none"></i>Routing</a>
          </li>
                    
      <li>
  
                          <a href="../../documentation/basic_concepts/controllers.html" title="Controllers">
          <i class="none"></i>
        Controllers</a>
            </li>
                    
      <li>
  
                          <a href="../../documentation/basic_concepts/filters.html" title="Filters">
          <i class="none"></i>
        Filters</a>
            </li>
                    
      <li>
  
                          <a href="../../documentation/basic_concepts/argument_extractors.html" title="Argument extractors">
          <i class="none"></i>
        Argument extractors</a>
            </li>
                    
      <li>
  
                          <a href="../../documentation/basic_concepts/dependency_injection.html" title="Dependency injection">
          <i class="none"></i>
        Dependency injection</a>
            </li>
                    
      <li>
  
                          <a href="../../documentation/basic_concepts/sessions.html" title="Sessions">
          <i class="none"></i>
        Sessions</a>
            </li>
                    
      <li>
  
                          <a href="../../documentation/basic_concepts/flash_scope.html" title="Flash scope">
          <i class="none"></i>
        Flash scope</a>
            </li>
              </ul>
        </li>
                
      <li>
  
                          <a href="../../documentation/configuration_and_modes.html" title="Configuration and modes">
          <i class="none"></i>
        Configuration and modes</a>
            </li>
                                                                                                      
      <li>
  
                          <a href="../../documentation/html_templating/getting_started.html" title="Html templating">
          <i class="icon-chevron-right"></i>
        Html templating</a>
                  </li>
                
      <li>
  
                          <a href="../../documentation/working_with_json_jsonp.html" title="Working with Json / JsonP">
          <i class="none"></i>
        Working with Json / JsonP</a>
            </li>
                
      <li>
  
                          <a href="../../documentation/working_with_xml.html" title="Working with Xml">
          <i class="none"></i>
        Working with Xml</a>
            </li>
                              <li class="nav-header">Advanced topics</li>
                              
      <li>
  
                          <a href="../../documentation/validation.html" title="Validation">
          <i class="none"></i>
        Validation</a>
            </li>
                
      <li>
  
                          <a href="../../documentation/uploading_files.html" title="Uploading files">
          <i class="none"></i>
        Uploading files</a>
            </li>
                
      <li>
  
                          <a href="../../documentation/scheduler.html" title="Scheduler">
          <i class="none"></i>
        Scheduler</a>
            </li>
                
      <li>
  
                          <a href="../../documentation/lifecycle.html" title="Lifecycle">
          <i class="none"></i>
        Lifecycle</a>
            </li>
                                                                  
      <li>
  
                          <a href="../../documentation/working_with_relational_dbs/jpa.html" title="Working with relational DBs">
          <i class="icon-chevron-right"></i>
        Working with relational DBs</a>
                  </li>
                
      <li>
  
                          <a href="../../documentation/using_the_cache.html" title="Using the cache">
          <i class="none"></i>
        Using the cache</a>
            </li>
                
      <li>
  
                          <a href="../../documentation/internationalization.html" title="Internationalization">
          <i class="none"></i>
        Internationalization</a>
            </li>
                
      <li>
  
                          <a href="../../documentation/static_assets.html" title="Static assets">
          <i class="none"></i>
        Static assets</a>
            </li>
                
      <li>
  
                          <a href="../../documentation/sending_mail.html" title="Sending mail">
          <i class="none"></i>
        Sending mail</a>
            </li>
                
      <li>
  
                          <a href="../../documentation/logging.html" title="Logging">
          <i class="none"></i>
        Logging</a>
            </li>
                
      <li>
  
                          <a href="../../documentation/servlet_bridge.html" title="Servlet bridge">
          <i class="none"></i>
        Servlet bridge</a>
            </li>
                                                                                                                                          
      <li>
  
                          <a href="../../documentation/testing_your_application/getting_started.html" title="Testing">
          <i class="icon-chevron-right"></i>
        Testing</a>
                  </li>
                
      <li>
  
                          <a href="../../documentation/debugging.html" title="Debugging">
          <i class="none"></i>
        Debugging</a>
            </li>
                
      <li>
  
                          <a href="../../documentation/security/getting_started.html" title="Security">
          <i class="none"></i>
        Security</a>
            </li>
                                                                                                      
      <li>
  
                          <a href="../../documentation/deployment/getting_started.html" title="Deployment">
          <i class="icon-chevron-right"></i>
        Deployment</a>
                  </li>
                
      <li>
  
                          <a href="../../documentation/upgrade_guide.html" title="Upgrade guide">
          <i class="none"></i>
        Upgrade guide</a>
            </li>
                
      <li>
  
                          <a href="../../apidocs/index.html" title="Api">
          <i class="none"></i>
        Api</a>
            </li>
                              <li class="nav-header">Ninja Modules</li>
                              
      <li>
  
                          <a href="../../documentation/modules.html" title="Overview">
          <i class="none"></i>
        Overview</a>
            </li>
                              <li class="nav-header">Great community</li>
                              
      <li>
  
                          <a href="https://twitter.com/ninjaframework" class="externalLink" title="@ninjaframework">
          <i class="none"></i>
        @ninjaframework</a>
            </li>
                
      <li>
  
                          <a href="https://groups.google.com/d/forum/ninja-framework" class="externalLink" title="Mailing list">
          <i class="none"></i>
        Mailing list</a>
            </li>
                
      <li>
  
                          <a href="https://github.com/ninjaframework/ninja" class="externalLink" title="Source code">
          <i class="none"></i>
        Source code</a>
            </li>
                
      <li>
  
                          <a href="https://github.com/ninjaframework/ninja/issues" class="externalLink" title="Bug tracker">
          <i class="none"></i>
        Bug tracker</a>
            </li>
                
      <li>
  
                          <a href="../../security.html" title="Security issues">
          <i class="none"></i>
        Security issues</a>
            </li>
                              <li class="nav-header">For developers</li>
                              
      <li>
  
                          <a href="../../developer/changelog.html" title="Changelog">
          <i class="none"></i>
        Changelog</a>
            </li>
                
      <li>
  
                          <a href="../../developer/roadmap.html" title="Roadmap">
          <i class="none"></i>
        Roadmap</a>
            </li>
                
      <li>
  
                          <a href="../../developer/getting_started.html" title="How to contribute">
          <i class="none"></i>
        How to contribute</a>
            </li>
            </ul>
                
                    
                            <form id="search-form" action="http://www.google.com/search" method="get" >
    
  <input value="http://www.ninjaframework.org" name="sitesearch" type="hidden"/>
  <input class="search-query" name="q" id="query" type="text" />
</form>
<script type="text/javascript" src="http://www.google.com/coop/cse/brand?form=search-form"></script>
          
          <hr />

           <div id="poweredBy">
                   
    <script type="text/javascript" src="https://apis.google.com/js/plusone.js"></script>

    
    <div class="g-plusone" data-href="http://www.ninjaframework.org" data-size="tall" ></div>

                   <div class="clear"></div>
                            <div class="clear"></div>
               
        
        
        <div id="twitter">
    
    <a href="https://twitter.com/ninjaframework" class="twitter-follow-button" data-show-count="true" data-align="left" data-size="medium" data-show-screen-name="true" data-lang="en">Follow ninjaframework</a>
    <script type="text/javascript">!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>

        </div>
                   <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="../../images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span9" >
                                  
            <h1>Routing</h1><p>Ninja features <b>one central route file</b>.
We think this is important, because you immediately
can see what routes your application provides. It especially
facilitates designing a nice restful application and Api, because you have a good
overview what is going on.</p><h2>Basics</h2><p>The route file is a plain old java file living at <code>conf/Routes.java</code>.</p><p><code>Routes.java</code> implements the interface <code>ApplicationRoutes.java</code>.
This interface defines a method called <code>public void init(Router router) {&hellip;}</code>
which allows us to map incoming requests to controllers and their methods.</p>
<pre class="prettyprint">
public class Routes implements ApplicationRoutes {

    @Override
    public void init(Router router) {
        
        // a GET request to "index" will be handled by a class called
        // "AppController" its method "index".
        router.GET().route("/index").with(AppController.class, "index");

        ...

    }
}
</pre><p>The <code>init(&hellip;)</code> method provides us with the <code>Router</code> and router allows us to
define what happens for GET, POST, PUT, OPTIONS, HEAD and DELETE requests.</p><p>And if you want to route a http method not yet supported by Ninja out of
the box you can always use
<code>route.METHOD(&ldquo;MY_CUSTOM_HTTP_METHOD&rdquo;).route(&hellip;)&hellip;</code>.</p>
<div class="alert alert-info">
Routes are matched top down. If an incoming request potentially maps to
two routes, the route defined first is executed.
</div><h2>With result directly</h2><p>You can use Result object to render a static page simply without controller.</p>
<pre class="prettyprint">
public class Routes implements ApplicationRoutes {

    @Override
    public void init(Router router) {
        
        // a GET request to "/" will be redirect to "/dashboard"
        router.GET().route("/").with(Results.redirect("/dashboard"));
        
        // show a static page
        router.GET().route("/dashboard").with(Results.html().template("/dashboard.html"));

        ...

    }
}
</pre><h2>Regex in your routes</h2><p>Routes can contain arbitrary Java regular expressions. You can use these
regular expressions simply by putting them into the route definition.</p><p>Some examples:</p>
<pre class="prettyprint">

// matches for instance "/assets/00012", "/assets/12334", ...
router.GET().route("/assets/\\d*").with(AssetsController.class, "serveDigits");

// matches for instance "/assets/myasset.xml", "/assets/boing.txt", ...
router.GET().route("/assets/.*").with(AssetsController.class, "serveArbitrary");

</pre><p>In the first example <code>\\d*</code> tells the router to match digits
(defined by <code>\\d</code>) of arbitrary length (defined by <code>*</code>).
In the second example <code>.*</code> lets the router match arbitrary characters
(<code>.</code>) of arbitrary length (defined by <code>*</code>).</p><p>This example also shows what happens if two routes match.
For instance a request to <code>/assets/00012</code> is matched by
both route definitions. In that case the first matching route from top will be
executed. In our case method <code>serveDigits</code>.</p><p>More on regular expressions:
<a href="http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html">http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html</a></p><h2>Getting variable url parts into your controller method</h2><p>A controller usually not only renders stuff,
but also takes some inputs and does something with them.</p><p>Let&rsquo;s assume we got a request like that:
<pre class="prettyprint">
GET /user/12345/my@email.com/userDashboard
</pre></p><p>Looks like a GET request to the userDashboard. The request seems to contain
an <code>id</code> and an <code>email</code>. As application developer you want to have a convenient
way to get <code>id</code> and <code>email</code> inside your controller. Ninja
allows you to define and name parts of your routes via
curly braces <code>{&hellip;}</code>:</p>
<pre class="prettyprint">
router.GET().route("/user/{id}/{email}/userDashboard").with(ApplicationController.class, "userDashboard");
</pre><p>We can then inject <code>id</code> and <code>email</code> into our controller via
annotation <code>@PathParam</code>.</p>
<pre class="prettyprint">
package controllers;

@Singleton
public class AppController {

    public Result userDashboard(
            @PathParam("id") String id, 
            @PathParam("email") String email) {

        //do something with the parameters...
    }

}
</pre>
<div class="alert alert-info">
By default Ninja replaces curly braces with the following regex to match a 
variable part: <code>([^/]*)</code>. That means that variable parts match arbitrary
characters but do not span over any path separators "/". If you need more control
please you'll find more in the next section.
</div><h2>Regular expressions in variable route parts</h2><p>Ninja allows you to specify regular expressions
that will be used to match arbitrary parts of your url.</p><p>The syntax is <code>{PRAMETER_NAME: REGEX}</code> (with a whitespace after the &ldquo;:&rdquo;).</p><p>For instance a route like <code>/assets/{fileName: .*}</code> will match everything
after <code>/assets/</code>. Imagine a request to <code>/assets/css/app.css</code>.
This request will be handled by the route and accessing the path parameter
<code>fileName</code> will return <code>css/app.css</code>.</p><p>You can use any Java compliant regular expressions for matching. Please refer to
the official documentation at <a href="http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html">http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html</a>.</p><h2>Injecting objects into the Router</h2><p>Because the Route.java is just a plain old java file we can also inject
arbitrary stuff into it (via Guice).</p><p>A popular use case is to inject ninjaProperties. This allows us to activate /
deactivate certain routes based on the environment we are in.</p><p>The following example shows that a setup route is not available when
running in production:</p>
<pre class="prettyprint">
public class Routes implements ApplicationRoutes {
    
    @Inject
    NinjaProperties ninjaProperties;

    @Override
    public void init(Router router) {
        
        // a GET request to "index" will be handled by a class called
        // "AppController" its method "index".
        router.GET().route("/index").with(AppController.class, "index");

        ...

        // only active when not in production mode:
        if (!ninjaProperties.isProd) {
            router.GET().route("/setup").with(AppController.class, "setup");
        }
    }
}
</pre><h2>Reverse routing</h2><p>Let&rsquo;s say you want to know the final route of a class ApplicationController.class, method &ldquo;index&rdquo;. Assume
that the original raw route looked like a simple <code>&ldquo;/&rdquo;</code>.</p><p>You can get the final url by injecting the router into your controller and then calling getReverseRoute</p>
<pre class="prettyprint">
@Inject
Router router;

...

public void myMethod() {

    // will result into "/"
    String generatedReverseRoute 
        = router.getReverseRoute(ApplicationController.class, "index");
    ...

}      
</pre><p>Now consider a more complex example. Say the original raw route contained placeholders on the following form:
<code>/user/{id}/{email}/userDashboard</code>. You can now ask the router for the final url, but you must
provide a map containing mappings from placeholders to final values. If the key cannot be found as
placeholders their value will be added as query parameters:</p>
<pre class="prettyprint">
@Inject
Router router;

...

public void myMethod() {

    map = Maps.newHashMap();
    map.put(&quot;id&quot;,&quot;myId&quot;);
    map.put(&quot;email&quot;,&quot;myEmail&quot;);
    map.put(&quot;paging_size&quot;,&quot;100&quot;);
    map.put(&quot;page&quot;,&quot;1&quot;);

    // this will result into &quot;/user/myId/myEmail/userDashboard?paging_size=100&amp;page=1&quot;
    String generatedReverseRoute 
        = router.getReverseRoute(
            ApplicationController.class, 
            &quot;userDashboard&quot;, 
            map);

    ...
}      
</pre><h2>A note on encoding / decoding</h2><p>Encoding / Decoding of Urls is not as easy as you think it is. Ninja tries to simplify everything
as much as possible, but as user of the Api you have to know what you are
submitting to Ninja.</p><p>We recommend the following <a href="http://www.lunatech-research.com/archives/2009/02/03/what-every-web-developer-must-know-about-url-encoding">excellent article from Lunatech</a>
before you use encoding / decoding actively in your application.</p><p>Let&rsquo;s reconsider the controller method from above:</p>
<pre class="prettyprint">
package controllers;

@Singleton
public class ApplicationController {

    public Result index(
            @PathParam("id") String id, 
            @PathParam("email") String email, 
            @Param("debug") String debug) {

        //do something with the parameters...
    }

}
</pre><p>You can expect that String <strong>id</strong> and String <strong>debug</strong> are both correctly decoded values.
<strong>BUT</strong> This assumes that
you are encoding the values correctly on the client side.
And encoding is different for
query parameters or stuff in the path. Do not even think about using
URLEncoder for encoding urls. This is wrong.</p><p>Simple example that outlines some of the difficulties:
Think of a route &ldquo;/user/{id}/userDashboard&rdquo;.</p><p>Let&rsquo;s say your <strong>id</strong> is &ldquo;rootuser/domain&rdquo;. If you do not encode the slash in
the middle you end up with a
url like /user/rootuser/domain/userDashboard.
And the this url does not match the route
because of the &ldquo;/&rdquo;.</p><p>Therefore you have to encode your id correctly. In that case it would be: rootuser%2Fdomain.
When the user then visits /user/rootuser%2Fdomain/userDashboard the route matches and
a @PathParam(&ldquo;id&rdquo;) would then be rootuser/domain as it is decoded by Ninja.</p><p>In principle it is really simple. But it is even simpler to mess encoding / decoding up.
The article from Lunatech mentioned earlier is awesome and explains everything.</p>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
                      <div class="row-fluid">
                              <p >Copyright &copy;                   2014.
          All rights reserved.      
                    
      </p>
        </div>

        
        
                </div>
    </footer>
        </body>
</html>
