<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 2013-10-31
 | Rendered using Apache Maven Fluido Skin 1.3.0
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20131031" />
    <meta http-equiv="Content-Language" content="en" />
    <title>Ninja Web Framework | Full stack web framework for Java. Fast and productive. Built on Maven - runs on servlet containers. - </title>
    <link rel="stylesheet" href="../css/apache-maven-fluido-1.3.0.min.css" />
    <link rel="stylesheet" href="../css/site.css" />
    <link rel="stylesheet" href="../css/print.css" media="print" />

      
    <script type="text/javascript" src="../js/apache-maven-fluido-1.3.0.min.js"></script>

                          
        
<script type="text/javascript">var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-38154034-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();</script>
          
            </head>
        <body class="topBarDisabled">
          
    
    
            
    
        
    <a href="http://github.com/ninjaframework/ninja">
      <img style="position: absolute; top: 0; right: 0; border: 0; z-index: 10000;"
        src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png"
        alt="Fork me on GitHub">
    </a>
  
                
                    
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                                  <a href=".././" id="bannerLeft">
                <h2>Ninja web framework</h2>
                </a>
                      </div>
        <div class="pull-right">  </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
                    
                  <li id="publishDate">Last Published: 2013-10-31</li>
                  <li class="divider">|</li> <li id="projectVersion">Version: 2.1.0</li>
                      
                
                    
      
                            </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span3">
          <div class="well sidebar-nav">
                
                    
                <ul class="nav nav-list">
                    <li class="nav-header"></li>
                                
      <li>
    
                          <a href="../index.html" title="Home">
          <i class="none"></i>
        Home</a>
            </li>
                  
      <li>
    
                          <a href="../introduction.html" title="Introduction">
          <i class="none"></i>
        Introduction</a>
            </li>
                  
      <li>
    
                          <a href="../team.html" title="Team">
          <i class="none"></i>
        Team</a>
            </li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                        
      <li>
    
                          <a href="../documentation/getting_started.html" title="Documentation">
          <i class="icon-chevron-down"></i>
        Documentation</a>
                    <ul class="nav nav-list">
                      
      <li>
    
                          <a href="../documentation/controller.html" title="Controller">
          <i class="none"></i>
        Controller</a>
            </li>
                      
      <li>
    
                          <a href="../documentation/injection.html" title="Injection">
          <i class="none"></i>
        Injection</a>
            </li>
                      
      <li>
    
                          <a href="../documentation/html_templating.html" title="Html templating">
          <i class="none"></i>
        Html templating</a>
            </li>
                      
      <li>
    
                          <a href="../documentation/static_assets.html" title="Static assets">
          <i class="none"></i>
        Static assets</a>
            </li>
                      
      <li>
    
                          <a href="../documentation/request_scope.html" title="Request scope">
          <i class="none"></i>
        Request scope</a>
            </li>
                      
      <li>
    
                          <a href="../documentation/internationalization.html" title="Internationalization">
          <i class="none"></i>
        Internationalization</a>
            </li>
                      
      <li>
    
                          <a href="../documentation/filter.html" title="Filter">
          <i class="none"></i>
        Filter</a>
            </li>
                      
      <li>
    
                          <a href="../documentation/application_configuration.html" title="Configuration">
          <i class="none"></i>
        Configuration</a>
            </li>
                      
      <li>
    
                          <a href="../documentation/jpa.html" title="JPA / DB">
          <i class="none"></i>
        JPA / DB</a>
            </li>
                      
      <li>
    
                          <a href="../documentation/db_migrations.html" title="DB Migrations">
          <i class="none"></i>
        DB Migrations</a>
            </li>
                      
      <li>
    
                          <a href="../documentation/cache.html" title="Caching">
          <i class="none"></i>
        Caching</a>
            </li>
                      
      <li>
    
                          <a href="../documentation/lifecycle.html" title="Lifecycle">
          <i class="none"></i>
        Lifecycle</a>
            </li>
                      
      <li>
    
                          <a href="../documentation/scheduler.html" title="Scheduler">
          <i class="none"></i>
        Scheduler</a>
            </li>
                      
      <li class="active">
    
            <a href="#"><i class="none"></i>Testing</a>
          </li>
                      
      <li>
    
                          <a href="../documentation/security_guide.html" title="Security Guide">
          <i class="none"></i>
        Security Guide</a>
            </li>
                      
      <li>
    
                          <a href="../documentation/debugging.html" title="Debugging">
          <i class="none"></i>
        Debugging</a>
            </li>
                      
      <li>
    
                          <a href="../documentation/validation.html" title="Validation">
          <i class="none"></i>
        Validation</a>
            </li>
                      
      <li>
    
                          <a href="../documentation/logging.html" title="Logging">
          <i class="none"></i>
        Logging</a>
            </li>
                      
      <li>
    
                          <a href="../documentation/servlet_bridge.html" title="Servlet bridge">
          <i class="none"></i>
        Servlet bridge</a>
            </li>
                      
      <li>
    
                          <a href="../documentation/deployment.html" title="Deployment">
          <i class="none"></i>
        Deployment</a>
            </li>
                      
      <li>
    
                          <a href="../documentation/upgrading_to_current_version.html" title="Upgrading to latest">
          <i class="none"></i>
        Upgrading to latest</a>
            </li>
                      
      <li>
    
                          <a href="../apidocs/index.html" title="API">
          <i class="none"></i>
        API</a>
            </li>
              </ul>
        </li>
                  
      <li>
    
                          <a href="../documentation/modules.html" title="Modules">
          <i class="none"></i>
        Modules</a>
            </li>
                              <li class="nav-header">Get involved</li>
                                
      <li>
    
                          <a href="https://twitter.com/ninjaframework" class="externalLink" title="@ninjaframework">
          <i class="none"></i>
        @ninjaframework</a>
            </li>
                  
      <li>
    
                          <a href="https://groups.google.com/d/forum/ninja-framework" class="externalLink" title="Mailing list">
          <i class="none"></i>
        Mailing list</a>
            </li>
                  
      <li>
    
                          <a href="https://github.com/ninjaframework/ninja" class="externalLink" title="Source code">
          <i class="none"></i>
        Source code</a>
            </li>
                  
      <li>
    
                          <a href="https://github.com/ninjaframework/ninja/issues" class="externalLink" title="Bug tracker">
          <i class="none"></i>
        Bug tracker</a>
            </li>
                  
      <li>
    
                          <a href="../security.html" title="Security issues">
          <i class="none"></i>
        Security issues</a>
            </li>
                              <li class="nav-header">Develop</li>
                                
      <li>
    
                          <a href="../developer/changelog.html" title="Changelog">
          <i class="none"></i>
        Changelog</a>
            </li>
                  
      <li>
    
                          <a href="../developer/roadmap.html" title="Roadmap">
          <i class="none"></i>
        Roadmap</a>
            </li>
                  
      <li>
    
                          <a href="../developer/getting_started.html" title="How to contribute">
          <i class="none"></i>
        How to contribute</a>
            </li>
            </ul>
                
                    
                            <form id="search-form" action="http://www.google.com/search" method="get" >
    
  <input value="http://www.ninjaframework.org" name="sitesearch" type="hidden"/>
  <input class="search-query" name="q" id="query" type="text" />
</form>
<script type="text/javascript" src="http://www.google.com/coop/cse/brand?form=search-form"></script>
          
          <hr class="divider" />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="../images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span9" >
                                  
            <h1>Testing</h1><p>Testing is <b>THE MOST IMPORTANT THING</b> of Ninja. We put a huge effort into making testing your apps
as simple and quick as possible. The developers of Ninja all had experiences with different web frameworks
that were really hard to test, or where tests were not reliable and slow.</p><p>Ninja changes that. </p><p>All test of Ninja run really fast. And they are just plain old JUnit tests. No matter if you are testing against
a mock, or a full blown Ninja application. Forget about Integration tests, and Unit tests. Ninja only knows Unit tests.</p><h2>Running tests and integration into IDEs</h2><p>Ninja&rsquo;s tests are just regular Unit tests. That means you can run all tests of your applications via a simple</p>
<pre class="prettyprint">
    mvn test
</pre><p>But sometimes you want to run only single tests from our IDE. And that is also really simple. You do not have to setup
anything special. Simply select your test class and run them as JUnit tests. That&rsquo;s all.</p><p>All tests by default as failsafe as possible. For instance tests with a running Ninja application do select
a free port on your machine. This also allows to simply automate your builds on your Jenkins. No more complicated
test setups to make sure that testing works. </p><h2>Tests at your disposal:</h2>
<ul>
  <li>NinjaRouterTest - Making sure that your routes work.</li><li>Mocked Tests - Testing parts of your application in isolation.</li><li>NinjaTest - Testing a running server on Http level.</li><li>NinjaApiDocTest - Ideal for documenting and testing Json Apis.</li><li>NinjaFluentLeniumTest - The best way to test html elements via Selenium on your Ninja application.</li>
</ul><h2>NinjaRouterTest</h2><p>NinjaRouterTest allows you to check whether your router works as expected. It allows you to make
sure that certain routes are handled by the correct controller classes and methods.</p><p>More interestingly it allows you to make sure that certain routes are only active in
an environment. For instance often you want to have method to setup test data in test and dev modes, but
not in prod mode. NinjaRouterTests allows you to assure that prod mode does not handle those kind
of methods.</p>
<pre class="prettyprint">
    public class RoutesTest extends NinjaRouterTest {
    
        @Test
        public void testRouting() {
            
            startServerInProdMode();
            aRequestLike("GET", "/").isHandledBy(ApplicationController.class, "index");
            aRequestLike("GET", "/index").isHandledBy(ApplicationController.class, "index");
        }
        
        @Test
        public void testThatSetupIsNotAccessibleInProd() {
            
            startServerInProdMode();
            aRequestLike("GET", "/setup").isNotHandledBy(ApplicationController.class, "setup");
            
        }
    
    }
</pre><h2>Mocked tests</h2><p>Mocked tests are really fast tests. They allow you to test certain areas of your application in isolation.</p><p>Consider the following controller. This controller gets a Dao injected. And the controller method
&ldquo;postArticleJson&rdquo; return a result with http code ok when the article can be posted, and a http code &ldquo;not found&rdquo; when
the article cannot be posted.</p>
<pre class="prettyprint">
    public class ApiController {
        
        @Inject
        ArticleDao articleDao;
        
        public Result postArticleJson(@LoggedInUser String username,
                                  ArticleDto articleDto) {
            
            boolean succeeded = articleDao.postArticle(username, articleDto);
            
            if (!succeeded) {
                return Results.notFound();
            } else {
                return Results.ok();
            }
            
        }
    }
</pre><p>Mocked tests are done via Mockito. A corresponding test would test if the controller really returns
a &ldquo;ok&rdquo; or &ldquo;not found&rdquo;.</p>
<pre class="prettyprint">

@RunWith(MockitoJUnitRunner.class)
    public class ApiControllerMockTest {
    
        @Mock
        ArticleDao articleDao;
        
        ApiController apiController;
        
        @Before
        public void setupTest() {
            apiController = new ApiController();
            apiController.articleDao = articleDao;
            
        }
        
    
        @Test
        public void testThatPostArticleReturnsOkWhenArticleDaoReturnsTrue() {
    
            when(articleDao.postArticle(null, null)).thenReturn(true);
            
            Result result = apiController.postArticleJson(null, null);
            
            assertEquals(200, result.getStatusCode());
    
        }
        
        @Test
        public void testThatPostArticleReturnsNotFoundWhenArticleDaoReturnsFalse() {
    
            when(articleDao.postArticle(null, null)).thenReturn(false);
            
            Result result = apiController.postArticleJson(null, null);
            
            assertEquals(404, result.getStatusCode());
    
        }
    
    }
</pre><p>Mockito is really powerful. Please have a look at their site at: <a href="https://code.google.com/p/mockito/">https://code.google.com/p/mockito/</a>.
It contains a lot more documentation and wonderful examples how to test your code in a beautiful way.</p><h2>NinjaTest</h2><p>NinjaTests really start your complete application and you are able to test all aspects of your real application.
If you use NinjaTests you get access to the NinjaTestBrowser.</p>
<pre class="prettyprint">
    public class ApplicationControllerTest extends NinjaTest {
        
        @Before
        public void setup() {
            
            ninjaTestBrowser.makeRequest(getServerAddress() + "setup");
            
        }
    
        @Test
        public void testThatHomepageWorks() {
    
            // /redirect will send a location: redirect in the headers
            String result = ninjaTestBrowser.makeRequest(getServerAddress() + "/");
    
            // If the redirect has worked we must see the following text
            // from the index screen:
            assertTrue(result.contains("Hello to the blog example!"));
            assertTrue(result.contains("My second post"));
    
        }
    
    }
</pre><p>The testcase illustrates that the NinjaTestBrowser can make request, and that you can then check
if the request contained certain content.</p><p>The NinjaTestBrowser can do much more than simply getting content. It can for instance be used
to verify that uploading of files works, it works for post and put requests, and you can
of course set different headers and send form requests.</p><p>We also recommend that each test method contains a method that makes sure that a database in the background
gets reset to a certain well defined state. This is done by a @Before method that calls a certain
url.</p><h2>NinjaApiDocTest</h2><p>Doctests allow to test and write html documentation at the same time. It is ideally suited to test and
document Json Apis.</p>
<pre class="prettyprint">
    public class ApiControllerDocTest extends NinjaApiDocTest {
        
        String GET_ARTICLES_URL = "/api/{username}/articles.json";
        String LOGIN_URL = "/login";
        
        String USER = "bob@gmail.com";
    
        @Test
        public void testGetAndPostArticleViaJson() throws Exception {
            
            sayNextSection("Retrieving articles for a user (Json)");
            
            say("Retrieving all articles of a user is a GET request to " + GET_ARTICLES_URL);
            
            ApiResponse apiResponse = makeGetRequest(buildUri(GET_ARTICLES_URL.replace("{username}", "bob@gmail.com")));
    
            ArticlesDto articlesDto = getGsonWithLongToDateParsing().fromJson(apiResponse.payload, ArticlesDto.class);
    
            assertEqualsAndSay(3, articlesDto.articles.size(), "We get back all 3 articles of that user");
            
            
        }
        
        
        @Override
        protected String getFileName() {
            return this.getClass().getSimpleName();
        }
    
    }
</pre><p>Doctests will generate html documentation into your target/site/doctest directory. In fact doctests
are quite simple. sayNextSection is a headline in a html document. say is a paragraph in a html element.
And whenever you are calling the doctest browser (eg via makeGetRequest(&hellip;)) the whole request, payload
and response is nicely documented in the generated html file.</p><p>This is awesome and allows you to test and document at the same time with minimal effort.
Simply extend NinjaApiDocTest and start&hellip;</p><p>But Doctest is a powerful library. Please have a look at <a href="http://devbliss.github.io/doctest/">http://devbliss.github.io/doctest/</a> for a much
more comprehensive overview. </p><h2>NinjaFluentLeniumTest</h2><p>Fluentlenium is a great tool that facilitates the usage of Selenium a lot. Selenium is the best
tool to test your application on html level. Click on elements, submit forms, make sure
css styles are present and so on.</p><p>Ninja integrates FluentLenium via the NinjaFluentLeniumTest.
Simply extend the class and you are ready to go:</p>
<pre class="prettyprint">
    public class ApplicationControllerFluentLeniumTest extends NinjaFluentLeniumTest {
    
        @Test
        public void testThatHomepageWorks() {
            
            goTo(getServerAddress() + "/");
            
            System.out.println("title: " + title());
            
            assertTrue(title().contains("Home page"));
            
            click("#login");
            
            assertTrue(url().contains("login"));
    
    
        }
        
    }
</pre><p>But FluentLenium can do a lot more. Check out <a href="https://github.com/FluentLenium/FluentLenium">https://github.com/FluentLenium/FluentLenium</a></p>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
              <div class="row span12">Copyright &copy;                   2013.
          All Rights Reserved.      
                    
      </div>

        
        
                </div>
    </footer>
  </body>
</html>
